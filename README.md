# AutoDev

[![GitHub](https://img.shields.io/badge/GitHub-euynahz%2Fauto--dev-blue?logo=github)](https://github.com/euynahz/auto-dev)

AI å…¨è‡ªåŠ¨å¼€å‘å¹³å°ï¼Œæ”¯æŒå¤š AI å·¥å…·åç«¯ã€‚è¾“å…¥éœ€æ±‚æˆ–å¯¼å…¥å·²æœ‰é¡¹ç›®ï¼ŒAI Agent è‡ªåŠ¨æ‹†è§£ä¸ºåŠŸèƒ½ç‚¹å¹¶é€ä¸ªå®ç°ï¼Œæ”¯æŒå¤š Agent å¹¶è¡Œå¼€å‘ã€‚

![Screenshot](./assets/screenshot.png)

## é¡¹ç›®ç‰¹ç‚¹

### ğŸ”Œ Provider æ’ä»¶åŒ–æ¶æ„

åº•å±‚ AI å·¥å…·å®Œå…¨è§£è€¦ï¼Œé€šè¿‡ Provider æ¥å£é€‚é…ä¸åŒ AI ç¼–ç å·¥å…·ï¼š

- **AgentProvider æ¥å£** â€” ç»Ÿä¸€çš„ `buildArgs` / `parseLine` / `isSuccessExit` / `capabilities` å£°æ˜
- **AgentEvent æ ‡å‡†åŒ–** â€” æ‰€æœ‰ provider è¾“å‡ºç»Ÿä¸€è½¬ä¸º `text` / `thinking` / `tool_use` / `system` / `error` äº‹ä»¶
- **å†…ç½® Claude Code** â€” é»˜è®¤ providerï¼Œå®Œæ•´æ”¯æŒ `stream-json` æµå¼è¾“å‡ºè§£æ
- **é›¶ä»£ç æ‰©å±•** â€” å®ç° `AgentProvider` æ¥å£ + `registerProvider()` æ³¨å†Œå³å¯æ¥å…¥æ–°å·¥å…·
- **èƒ½åŠ›å£°æ˜** â€” æ¯ä¸ª provider å£°æ˜è‡ªå·±æ”¯æŒçš„åŠŸèƒ½ï¼ˆstreaming / maxTurns / systemPrompt / agentTeams / modelSelection / dangerousModeï¼‰ï¼Œç³»ç»Ÿè‡ªåŠ¨é€‚é…
- **`GET /api/providers`** â€” å‰ç«¯åŠ¨æ€è·å–å¯ç”¨ provider åˆ—è¡¨åŠèƒ½åŠ›ï¼ŒUI è‡ªåŠ¨é€‚é…

### ğŸ§  åŸºäº Anthropic é•¿æ—¶é—´ Agent ç ”ç©¶

å®ç°äº† Anthropic è®ºæ–‡ [Effective Harnesses for Long-Running Agents](https://www.anthropic.com/engineering/effective-harnesses-for-long-running-agents) æå‡ºçš„æ ¸å¿ƒæ¨¡å¼ï¼š

- **åŒ Agent æ¶æ„** â€” Initializer Agent æ‹†è§£éœ€æ±‚ç”Ÿæˆ Feature Listï¼ŒCoding Agent é€ä¸ªå®ç°
- **feature_list.json ä¸ºå”¯ä¸€çœŸç›¸æº** â€” JSON æ ¼å¼ï¼Œåªæœ‰ `passes` å­—æ®µå¯è¢«ä¿®æ”¹ï¼Œæœç» Agent ç¯¡æ”¹æˆ–é—æ¼éœ€æ±‚
- **å¢é‡æ¨è¿›** â€” æ¯ä¸ª Session åªåšä¸€ä¸ª Featureï¼Œåšå®Œ commitï¼Œä¿è¯ä»£ç å§‹ç»ˆå¯åˆå¹¶
- **ä¸Šä¸‹æ–‡æ¡¥æ¥** â€” é€šè¿‡ `claude-progress.txt` + `git log` è®©æ–° Session å¿«é€Ÿäº†è§£é¡¹ç›®çŠ¶æ€ï¼Œè§£å†³è·¨ä¸Šä¸‹æ–‡çª—å£çš„è®°å¿†æ–­è£‚é—®é¢˜

### ğŸ”€ å¤š Agent å¹¶è¡Œå¼€å‘

ä¸æ­¢äº Anthropic åŸå§‹ç¤ºä¾‹çš„å• Agent ä¸²è¡Œæ¨¡å¼ï¼Œæ‰©å±•æ”¯æŒå¤š Agent å¹¶è¡Œï¼š

- æ¯ä¸ª Agent åœ¨ç‹¬ç«‹ Git åˆ†æ”¯ï¼ˆ`agent-{index}/feature-{featureId}`ï¼‰ä¸Šå·¥ä½œï¼Œäº’ä¸å¹²æ‰°
- `claimedFeatures` Map åŸå­åŒ–åˆ†é… Featureï¼Œä¿è¯ä¸ä¼šæœ‰ä¸¤ä¸ª Agent æŠ¢åŒä¸€ä¸ªä»»åŠ¡
- Git æ“ä½œé€šè¿‡ Promise é˜Ÿåˆ—ä¸²è¡Œæ‰§è¡Œï¼Œé¿å…å¹¶å‘å†²çª
- å®Œæˆåè‡ªåŠ¨ `git merge --no-ff` å› mainï¼Œå†²çªæ—¶æ ‡è®°éœ€äººå·¥å¤„ç†
- `concurrency = 1` æ—¶é€€åŒ–ä¸ºä¸²è¡Œæ¨¡å¼ï¼Œå®Œå…¨å‘åå…¼å®¹

### ğŸ¤– Agent Teams æ¨¡å¼

ç¬¬ä¸‰ç§æ‰§è¡Œæ¨¡å¼ â€” ç³»ç»Ÿåªå¯åŠ¨ä¸€ä¸ª AI ä¼šè¯ï¼Œç”± AI å†…éƒ¨ä½¿ç”¨ Agent Teams åŠŸèƒ½è‡ªä¸»åè°ƒå¤šä¸ªå­ Agentï¼š

- åè°ƒé€»è¾‘ä»ç³»ç»Ÿä¾§è½¬ç§»åˆ° AI å†…éƒ¨ï¼ŒAI è‡ªä¸»å†³å®šä»»åŠ¡åˆ†é…å’Œå¹¶è¡Œç­–ç•¥
- å…¨æµç¨‹è‡ªåŠ¨åŒ–ï¼šç†è§£éœ€æ±‚ â†’ è§„åˆ’æ¶æ„ â†’ ç”Ÿæˆ Feature List â†’ åˆå§‹åŒ–é¡¹ç›® â†’ å¹¶è¡Œå¼€å‘ â†’ æ”¶å°¾
- æ‰€æœ‰ Agent åœ¨ main åˆ†æ”¯å·¥ä½œï¼Œé€šè¿‡é¢‘ç¹æäº¤é¿å…å†²çª
- åˆ›å»ºé¡¹ç›®æ—¶å‹¾é€‰ã€ŒAgent Teams æ¨¡å¼ã€å³å¯å¯ç”¨
- éœ€è¦ provider æ”¯æŒ `agentTeams` èƒ½åŠ›ï¼ˆç›®å‰ä»… Claude Code æ”¯æŒï¼‰

### ğŸ¯ é¡¹ç›®çº§ç³»ç»Ÿæç¤ºè¯

ä¸ºæ¯ä¸ªé¡¹ç›®é…ç½®è‡ªå®šä¹‰ System Promptï¼Œå¯¹æ‰€æœ‰ Agentï¼ˆinitializerã€codingã€parallel-codingã€agent-teamsã€append-initializerï¼‰ç»Ÿä¸€ç”Ÿæ•ˆï¼š

- åˆ›å»ºæˆ–å¯¼å…¥é¡¹ç›®æ—¶åœ¨é«˜çº§é€‰é¡¹ä¸­å¡«å†™ï¼Œä¹Ÿå¯åœ¨é¡¹ç›®è¯¦æƒ…é¡µéšæ—¶ä¿®æ”¹
- é€šè¿‡ Claude CLI çš„ `--system-prompt` å‚æ•°æ³¨å…¥ï¼Œä¸ä»»åŠ¡ prompt åˆ†ç¦»
- ä¿®æ”¹åä¸‹ä¸ª Session ç”Ÿæ•ˆï¼Œä¸ä¸­æ–­å½“å‰è¿è¡Œçš„ Session
- é€‚ç”¨äºæ³¨å…¥ç¼–ç è§„èŒƒã€æŠ€æœ¯æ ˆåå¥½ã€è¯­è¨€è¦æ±‚ç­‰é¡¹ç›®çº§çº¦æŸ

### ğŸ“‹ ä»»åŠ¡åˆ—è¡¨å®¡æŸ¥æ¨¡å¼

åˆ›å»ºé¡¹ç›®æ—¶å¯é€‰æ‹©ã€Œåˆå§‹åŒ–åå®¡æŸ¥ä»»åŠ¡åˆ—è¡¨ã€ï¼Œè®©ä½ åœ¨ AI å¼€å§‹ç¼–ç å‰å…ˆå®¡æŸ¥å’Œè°ƒæ•´ Feature Listï¼š

- å‹¾é€‰åï¼ŒInitializer Agent ç”Ÿæˆ Feature List åé¡¹ç›®è¿›å…¥ `reviewing` çŠ¶æ€ï¼Œä¸ä¼šè‡ªåŠ¨å¼€å§‹ç¼–ç 
- å®¡æŸ¥ç•Œé¢æ”¯æŒå‹¾é€‰å•ä¸ªæˆ–å…¨é€‰ Featureï¼Œè¾“å…¥ä¿®æ”¹æŒ‡ä»¤åç‚¹å‡»ã€ŒAI ä¿®æ”¹ã€è§¦å‘ Claude å¯¹é€‰ä¸­ä»»åŠ¡è¿›è¡Œè°ƒæ•´
- æ”¯æŒä¿®æ”¹æè¿°ã€è°ƒæ•´æ­¥éª¤ã€æ‹†åˆ†/åˆå¹¶/åˆ é™¤ Feature
- ç¡®è®¤æ— è¯¯åç‚¹å‡»ã€Œç¡®è®¤å¹¶å¼€å§‹ç¼–ç ã€ï¼Œé¡¹ç›®æ‰ä¼šæ­£å¼è¿›å…¥ç¼–ç é˜¶æ®µ

### ğŸ“¦ ä¸€é”®å¯¼å…¥å·²æœ‰é¡¹ç›®

ä¸åªæ˜¯ä»é›¶åˆ›å»ºï¼Œè¿˜èƒ½å¯¼å…¥å·²æœ‰ä»£ç ä»“åº“ï¼š

- è‡ªåŠ¨æ‰«æç›®å½•ç»“æ„ã€README.mdã€CLAUDE.mdã€docs/*.mdã€package.json
- å°†æ‰«æå†…å®¹æ‹¼æ¥ä¸ºé¡¹ç›®æè¿°ï¼ˆspecï¼‰ï¼Œç›´æ¥æŒ‡å‘åŸç›®å½•ï¼Œä¸å¤åˆ¶æ–‡ä»¶
- å¯¼å…¥åå¯åŠ¨ Agent å³å¯å¼€å§‹è‡ªåŠ¨å¼€å‘

### ğŸ–¥ï¸ å®æ—¶ Web ç›‘æ§é¢æ¿

å…¨ç¨‹å¯è§†åŒ–ï¼Œä¸æ˜¯é»‘ç›’ï¼š

- Dashboard é¡¹ç›®å¡ç‰‡ + è¿›åº¦æ¡ï¼Œä¸€çœ¼çœ‹æ¸…æ‰€æœ‰é¡¹ç›®çŠ¶æ€
- é¡¹ç›®è¯¦æƒ…é¡µï¼šå·¦ä¾§ Feature Listï¼ˆæŒ‰åˆ†ç±»åˆ†ç»„ï¼Œâœ…/âŒ çŠ¶æ€ï¼ŒğŸ”„ æ ‡è¯†æ­£åœ¨å¤„ç†çš„ Agentï¼‰ï¼Œå³ä¾§ç»ˆç«¯é£æ ¼å®æ—¶æ—¥å¿—
- å¹¶è¡Œæ¨¡å¼ä¸‹æŒ‰ Agent Tab åˆ‡æ¢æ—¥å¿—ï¼Œé¡¶éƒ¨æ˜¾ç¤ºæ´»è·ƒ Agent æ•°é‡
- **Session ç”˜ç‰¹å›¾** â€” æ¯ä¸ª Session ç”¨æ¨ªæ¡è¡¨ç¤ºï¼Œå®½åº¦æŒ‰è€—æ—¶æ¯”ä¾‹ç¼©æ”¾ï¼Œä¸€çœ¼çœ‹å‡ºæ•ˆç‡åˆ†å¸ƒï¼›æ¨ªæ¡æ˜¾ç¤ºä»»åŠ¡æè¿°ï¼ˆè‡ªåŠ¨ä»æ—¥å¿—æ¨æ–­ Featureï¼‰
- **Session æ—¥å¿—æŸ¥çœ‹å™¨** â€” ç‚¹å‡»ã€ŒæŸ¥çœ‹ã€æŒ‰é’®ä¾§æ‹‰æ˜¾ç¤º Claude åŸå§‹è¾“å‡ºï¼Œstream-json è§£æä¸ºå½©è‰²åˆ†ç±»å±•ç¤ºï¼ˆassistant / tool_use / error ç­‰ï¼‰ï¼Œæ”¯æŒæ—¥å¿—æ–‡ä»¶å·²åˆ é™¤çš„ 404 å¤„ç†
- **è¿è¡Œæ—¶è¿½åŠ éœ€æ±‚** â€” é¡¹ç›®è¿è¡Œä¸­å¯éšæ—¶è¿½åŠ æ–°éœ€æ±‚ï¼Œç³»ç»Ÿè‡ªåŠ¨æ‹†è§£ä¸º Feature å¹¶è¿½åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—
- å„é¢æ¿æ”¯æŒå…¨å±åˆ‡æ¢ï¼ŒFeature List / Agent Log / Session å†å²å‡å¯ç‹¬ç«‹å…¨å±æŸ¥çœ‹
- WebSocket æ¨é€ï¼Œé›¶å»¶è¿Ÿæ›´æ–°

### ğŸ¤ äººæœºåä½œ

Agent ä¸æ˜¯å­¤å²›ï¼Œé‡åˆ°é—®é¢˜ä¼šä¸»åŠ¨æ±‚åŠ©ï¼š

- Agent è¾“å‡º `[HUMAN_HELP] é—®é¢˜æè¿°` æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨æ•è·å¹¶æ¨é€åˆ°å‰ç«¯
- ç”¨æˆ·å›å¤å†™å…¥ `.human-response.md`ï¼ŒAgent ä¸‹æ¬¡å¯åŠ¨æ—¶è¯»å–å¹¶ç»§ç»­
- é€‚ç”¨äºç¼ºå¤±é…ç½®ã€éœ€æ±‚ä¸æ¸…æ™°ã€éœ€è¦äººå·¥å†³ç­–ç­‰åœºæ™¯

### ğŸ›¡ï¸ å¥å£®æ€§è®¾è®¡

é¢å‘ç”Ÿäº§ç¯å¢ƒçš„å¯é æ€§è€ƒé‡ï¼š

- **Token è®¤è¯** â€” `AUTODEV_TOKEN` ç¯å¢ƒå˜é‡æ§åˆ¶ API å’Œ WebSocket è®¿é—®ï¼ˆBearer header / query paramï¼‰ï¼Œä¸è®¾åˆ™è·³è¿‡
- **è·¯å¾„æ²™ç®±** â€” `isPathSafe()` é™åˆ¶ checkDir / importProject / raw-log è·¯å¾„èŒƒå›´ï¼ˆhome / tmp / cwdï¼‰ï¼Œé˜²æ­¢è·¯å¾„ç©¿è¶Š
- **æ˜¾å¼çŠ¶æ€æœº** â€” `state-machine.ts` å®šä¹‰æ‰€æœ‰åˆæ³•çŠ¶æ€è½¬æ¢ï¼Œæ›¿ä»£æ•£è½çš„ if-elseï¼Œæœç»éæ³•çŠ¶æ€
- **å¢™é’Ÿè¶…æ—¶** â€” 30 åˆ†é’Ÿæ—  stdout è¾“å‡ºè‡ªåŠ¨ SIGTERM + SIGKILLï¼Œé˜²æ­¢åƒµå°¸è¿›ç¨‹
- **é‡è¯•ä¸Šé™** â€” å•ä¸ª Feature æœ€å¤šé‡è¯• 3 æ¬¡ï¼Œè¶…é™è‡ªåŠ¨è·³è¿‡å¹¶æ ‡è®°ï¼Œé˜²æ­¢æ— é™å¾ªç¯
- **Feature ç”Ÿå‘½å‘¨æœŸ** â€” `failCount` / `lastAttemptAt` è¿½è¸ªå¤±è´¥å†å²ï¼Œ`inProgress` ç³»ç»Ÿçº§ç®¡ç†ï¼ˆé Agent è‡ªè¡Œè®¾ç½®ï¼‰
- **claimedFeatures æŒä¹…åŒ–** â€” å†™å…¥ `claimed.json`ï¼ŒæœåŠ¡é‡å¯åè‡ªåŠ¨æ¢å¤è®¤é¢†çŠ¶æ€
- **è¿›ç¨‹æ¢å¤** â€” æœåŠ¡é‡å¯æ—¶è‡ªåŠ¨æ£€æµ‹å­¤å„¿è¿›ç¨‹ï¼Œé€šè¿‡æŒä¹…åŒ–çš„ PID æ¸…ç†å¹¶é‡ç½®çŠ¶æ€
- **WebSocket å¿ƒè·³** â€” æœåŠ¡ç«¯ 30s ping/pongï¼Œåƒµå°¸è¿æ¥è‡ªåŠ¨ terminate
- **æŒ‡æ•°é€€é¿é‡è¿** â€” å®¢æˆ·ç«¯æ–­çº¿å 3s â†’ 6s â†’ 12s â†’ 24s â†’ 30s capï¼Œé‡è¿åè‡ªåŠ¨åˆ·æ–°çŠ¶æ€
- **æ—¥å¿—æŒä¹…åŒ–** â€” JSONL append-only æ ¼å¼ï¼Œ5000 æ¡è‡ªåŠ¨æˆªæ–­ï¼Œæ—§ `logs.json` è‡ªåŠ¨è¿ç§»
- **æ™ºèƒ½æ—¥å¿—è¿‡æ»¤** â€” JSON æ ¼å¼çš„æ€è€ƒè¿‡ç¨‹è§£æä¸ºå¯è¯»æ‘˜è¦å®æ—¶å±•ç¤ºï¼ˆä¸æŒä¹…åŒ–ï¼‰ï¼Œå‡å°‘å™ªéŸ³
- **å‰ç«¯æ€§èƒ½ä¼˜åŒ–** â€” `React.memo` + `content-visibility: auto` å®ç°æµè§ˆå™¨åŸç”Ÿè™šæ‹ŸåŒ–ï¼Œæ—¥å¿—ä¸Šé™ 3000 æ¡é˜²æ­¢å†…å­˜æº¢å‡º
- **å¯åŠ¨å¿ƒè·³** â€” 15 ç§’æ— è¾“å‡ºæ—¶æ˜¾ç¤ºç­‰å¾…æç¤ºï¼Œé¿å…ç”¨æˆ·ä»¥ä¸ºå¡æ­»
- **ä¼˜é›…åœæ­¢** â€” SIGTERM â†’ ç­‰å¾… 5s â†’ SIGKILLï¼Œç¡®ä¿è¿›ç¨‹ä¸æ®‹ç•™

---

## æŠ€æœ¯æ ˆ

| å±‚ | æŠ€æœ¯ |
|---|------|
| å‰ç«¯ | React 19 + TypeScript + Vite + Tailwind CSS v4 + Radix UI |
| çŠ¶æ€ç®¡ç† | Zustand |
| åç«¯ | Express + WebSocket (ws) |
| AI å¼•æ“ | Provider æ’ä»¶åŒ–ï¼ˆå†…ç½® Claude Code CLIï¼Œå¯æ‰©å±• Codex / Gemini / Aider ç­‰ï¼‰ |
| çŠ¶æ€ç®¡ç†ï¼ˆåç«¯ï¼‰ | æ˜¾å¼çŠ¶æ€æœºï¼ˆstate-machine.tsï¼‰ |
| æµ‹è¯• | Vitestï¼ˆ61 testsï¼‰ |
| ç‰ˆæœ¬æ§åˆ¶ | Gitï¼ˆåˆ†æ”¯éš”ç¦» + è‡ªåŠ¨åˆå¹¶ï¼‰ |

## å¿«é€Ÿå¼€å§‹

```bash
# å®‰è£…ä¾èµ–
npm install

# åŒæ—¶å¯åŠ¨å‰ç«¯å’Œåç«¯
npm start
```

- å‰ç«¯ï¼š`http://localhost:5173`
- åç«¯ APIï¼š`http://localhost:3001`
- WebSocketï¼š`ws://localhost:3001/ws`

å‰ææ¡ä»¶ï¼šå·²å®‰è£…å¹¶é…ç½®å¥½è‡³å°‘ä¸€ä¸ª AI ç¼–ç å·¥å…·ï¼ˆé»˜è®¤ [Claude Code CLI](https://docs.anthropic.com/en/docs/claude-code)ï¼‰ã€‚

### å®‰å…¨é…ç½®ï¼ˆå¯é€‰ï¼‰

```bash
# è®¾ç½® API Tokenï¼ˆä¸è®¾åˆ™è·³è¿‡è®¤è¯ï¼‰
export AUTODEV_TOKEN=your-secret-token
```

### æµ‹è¯•

```bash
npm test          # è¿è¡Œ 61 ä¸ªå•å…ƒæµ‹è¯•
```

## æ‰©å±• Provider

å®ç° `AgentProvider` æ¥å£å³å¯æ¥å…¥æ–°çš„ AI ç¼–ç å·¥å…·ï¼š

```typescript
// server/providers/codex.ts
import type { AgentProvider } from './types.js'

export const codexProvider: AgentProvider = {
  name: 'codex',
  displayName: 'OpenAI Codex',
  binary: 'codex',
  capabilities: {
    streaming: true,
    maxTurns: false,
    systemPrompt: true,
    agentTeams: false,
    modelSelection: true,
    dangerousMode: false,
  },
  buildArgs(ctx) {
    return ['--json', '-p', ctx.prompt, '--model', ctx.model]
  },
  parseLine(line) {
    // è§£æ codex çš„è¾“å‡ºæ ¼å¼ â†’ æ ‡å‡†åŒ– AgentEvent
    const event = JSON.parse(line)
    if (event.type === 'message') return { type: 'text', content: event.content }
    return { type: 'ignore' }
  },
  isSuccessExit(code) { return code === 0 },
}
```

ç„¶ååœ¨ `registry.ts` ä¸­æ³¨å†Œï¼š

```typescript
import { codexProvider } from './codex.js'
registerProvider(codexProvider)
```

å‰ç«¯ Provider é€‰æ‹©å™¨è‡ªåŠ¨å‡ºç°æ–°é€‰é¡¹ï¼Œé›¶ UI æ”¹åŠ¨ã€‚

## é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ server/                    # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ index.ts               # Express + WebSocket å…¥å£ï¼ˆå«å¿ƒè·³ + token è®¤è¯ï¼‰
â”‚   â”œâ”€â”€ routes/api.ts          # REST API è·¯ç”±ï¼ˆå« auth ä¸­é—´ä»¶ + è·¯å¾„æ²™ç®±ï¼‰
â”‚   â”œâ”€â”€ providers/             # AI Provider æ’ä»¶å±‚
â”‚   â”‚   â”œâ”€â”€ types.ts           # AgentProvider æ¥å£ + AgentEvent æ ‡å‡†åŒ–äº‹ä»¶
â”‚   â”‚   â”œâ”€â”€ claude.ts          # Claude Code CLI å®ç°
â”‚   â”‚   â””â”€â”€ registry.ts        # Provider æ³¨å†Œè¡¨ + æŸ¥è¯¢ API
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ agent.ts           # Agent è°ƒåº¦å¼•æ“ï¼ˆæ ¸å¿ƒï¼Œprovider-agnosticï¼‰
â”‚   â”‚   â”œâ”€â”€ project.ts         # é¡¹ç›® CRUD + Feature åŒæ­¥ + è·¯å¾„æ²™ç®±
â”‚   â”‚   â””â”€â”€ state-machine.ts   # é¡¹ç›®çŠ¶æ€æœºï¼ˆæ˜¾å¼çŠ¶æ€è½¬æ¢è¡¨ï¼‰
â”‚   â”œâ”€â”€ prompts/
â”‚   â”‚   â”œâ”€â”€ initializer.md     # åˆå§‹åŒ– Agent æç¤ºè¯
â”‚   â”‚   â”œâ”€â”€ append-initializer.md # è¿½åŠ éœ€æ±‚æ‹†è§£æç¤ºè¯
â”‚   â”‚   â”œâ”€â”€ coding.md          # ä¸²è¡Œç¼–ç  Agent æç¤ºè¯
â”‚   â”‚   â”œâ”€â”€ coding-parallel.md # å¹¶è¡Œç¼–ç  Agent æç¤ºè¯
â”‚   â”‚   â””â”€â”€ agent-teams.md     # Agent Teams å…¨æµç¨‹æç¤ºè¯
â”‚   â””â”€â”€ types.ts
â”œâ”€â”€ src/                       # å‰ç«¯
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ Dashboard.tsx      # é¡¹ç›®åˆ—è¡¨ + åˆ›å»º/å¯¼å…¥
â”‚   â”‚   â””â”€â”€ ProjectDetail.tsx  # é¡¹ç›®è¯¦æƒ…ï¼ˆFeature + æ—¥å¿— + æ—¶é—´çº¿ï¼‰
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ui/                # åŸºç¡€ UI ç»„ä»¶ï¼ˆBadge, Card, Dialog, Sheet ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ project/           # CreateProjectDialog, ImportProjectDialog, FeatureList
â”‚   â”‚   â””â”€â”€ agent/             # AgentLog, SessionTimeline, HelpDialog
â”‚   â”œâ”€â”€ store/index.ts         # Zustand å…¨å±€çŠ¶æ€
â”‚   â”œâ”€â”€ hooks/useWebSocket.ts  # WebSocket è¿æ¥ç®¡ç†ï¼ˆæŒ‡æ•°é€€é¿é‡è¿ï¼‰
â”‚   â””â”€â”€ lib/api.ts             # API å®¢æˆ·ç«¯
â””â”€â”€ .autodev-data/             # è¿è¡Œæ—¶æ•°æ®ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
    â”œâ”€â”€ projects/              # é¡¹ç›®å…ƒæ•°æ® + Feature + Session + æ—¥å¿—ï¼ˆJSONLï¼‰
    â””â”€â”€ claude-logs/           # Agent åŸå§‹è¾“å‡ºæ—¥å¿—
```

## API

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/api/providers` | å¯ç”¨ AI Provider åˆ—è¡¨åŠèƒ½åŠ›å£°æ˜ |
| GET | `/api/projects` | é¡¹ç›®åˆ—è¡¨ |
| GET | `/api/projects/:id` | é¡¹ç›®è¯¦æƒ… |
| POST | `/api/projects` | åˆ›å»ºé¡¹ç›® |
| POST | `/api/projects/import` | å¯¼å…¥å·²æœ‰é¡¹ç›® |
| DELETE | `/api/projects/:id` | åˆ é™¤é¡¹ç›® |
| POST | `/api/projects/:id/start` | å¯åŠ¨ Agent |
| POST | `/api/projects/:id/stop` | åœæ­¢ Agent |
| GET | `/api/projects/:id/features` | Feature åˆ—è¡¨ |
| GET | `/api/projects/:id/sessions` | Session å†å² |
| GET | `/api/projects/:id/sessions/:sid/raw-log` | Session åŸå§‹æ—¥å¿—ï¼ˆçº¯æ–‡æœ¬ï¼‰ |
| GET | `/api/projects/:id/logs` | å®æ—¶æ—¥å¿—å†å² |
| GET | `/api/projects/:id/help-requests` | å¾…å¤„ç†äººå·¥ååŠ©è¯·æ±‚ |
| POST | `/api/projects/:id/help-response` | æäº¤äººå·¥ååŠ©å›å¤ |
| PUT | `/api/projects/:id/system-prompt` | æ›´æ–°ç³»ç»Ÿæç¤ºè¯ |
| POST | `/api/projects/:id/review-features` | å®¡æŸ¥æ¨¡å¼ä¸‹ AI ä¿®æ”¹é€‰ä¸­ Feature |
| POST | `/api/projects/:id/confirm-review` | ç¡®è®¤å®¡æŸ¥å¹¶å¼€å§‹ç¼–ç  |
| POST | `/api/projects/:id/append-spec` | è¿è¡Œæ—¶è¿½åŠ éœ€æ±‚ |

WebSocket `/ws` æ¨é€æ¶ˆæ¯ç±»å‹ï¼š`log`ã€`status`ã€`progress`ã€`feature_update`ã€`features_sync`ã€`session_update`ã€`agent_count`ã€`human_help`

## AI Agent åä½œæµç¨‹

### æ€»ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ç”¨æˆ·è¾“å…¥éœ€æ±‚ / å¯¼å…¥é¡¹ç›®                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Initializer Agentâ”‚  Session 1
              â”‚                 â”‚
              â”‚ â€¢ è¯»å– app_spec â”‚
              â”‚ â€¢ ç”Ÿæˆ feature  â”‚
              â”‚   _list.json    â”‚
              â”‚ â€¢ åˆ›å»º init.sh  â”‚
              â”‚ â€¢ git init      â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚  concurrency = 1 ?    â”‚
           â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
            æ˜¯ â”‚               â”‚ å¦
               â–¼               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ å• Agent   â”‚  â”‚ å¤š Agent     â”‚  â”‚ Agent Teams  â”‚
        â”‚ ä¸²è¡Œæ¨¡å¼    â”‚  â”‚ å¹¶è¡Œæ¨¡å¼      â”‚  â”‚ è‡ªä¸»åè°ƒæ¨¡å¼  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚               â”‚                â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Provider æŠ½è±¡å±‚    â”‚
                    â”‚                     â”‚
                    â”‚  buildArgs()        â”‚
                    â”‚  parseLine()        â”‚
                    â”‚  isSuccessExit()    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼                â–¼                â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Claude  â”‚   â”‚  Codex   â”‚    â”‚  Gemini  â”‚
        â”‚  Code    â”‚   â”‚  CLI     â”‚    â”‚  CLI     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> Agent Teams æ¨¡å¼åœ¨åˆ›å»ºé¡¹ç›®æ—¶å‹¾é€‰å¯ç”¨ï¼Œè·³è¿‡ä¸Šè¿°åˆ†æ”¯åˆ¤æ–­ï¼Œç›´æ¥å¯åŠ¨å•ä¸ªå…¨æµç¨‹ Claude ä¼šè¯ã€‚

### æ¨¡å¼ä¸€ï¼šå• Agent ä¸²è¡Œå¼€å‘ï¼ˆconcurrency = 1ï¼‰

ä¸€ä¸ª Coding Agent åœ¨ `main` åˆ†æ”¯ä¸ŠæŒ‰ä¼˜å…ˆçº§é€ä¸ªå®Œæˆ Featureã€‚

```
Session 2          Session 3          Session 4
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Coding   â”‚ â”€â”€â”€â–º â”‚ Coding   â”‚ â”€â”€â”€â–º â”‚ Coding   â”‚ â”€â”€â”€â–º ...
â”‚ Agent    â”‚ 3s   â”‚ Agent    â”‚ 3s   â”‚ Agent    â”‚
â”‚          â”‚      â”‚          â”‚      â”‚          â”‚
â”‚ Feature Aâ”‚      â”‚ Feature Bâ”‚      â”‚ Feature Câ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                 â”‚                 â”‚
     â–¼                 â–¼                 â–¼
  git commit        git commit        git commit
  on main           on main           on main
```

æ¯ä¸ª Session çš„ 10 æ­¥æµç¨‹ï¼š

1. **è·å–æ–¹å‘** â€” `pwd` â†’ è¯» `claude-progress.txt` â†’ è¯» `feature_list.json` â†’ `git log`
2. **å¯åŠ¨æœåŠ¡** â€” è¿è¡Œ `init.sh` æˆ–æ‰‹åŠ¨å¯åŠ¨ dev server
3. **éªŒè¯å›å½’** â€” æŠ½æŸ¥ 1-2 ä¸ªå·²é€šè¿‡çš„ Featureï¼Œç¡®è®¤æ²¡æœ‰å›å½’ bug
4. **é€‰æ‹©ç›®æ ‡** â€” ä» feature_list.json ä¸­é€‰æœ€é«˜ä¼˜å…ˆçº§çš„æœªå®Œæˆ Feature
5. **ç¼–ç å®ç°** â€” å†™ä»£ç ï¼ˆå‰ç«¯ + åç«¯ï¼‰
6. **ç«¯åˆ°ç«¯æµ‹è¯•** â€” é€šè¿‡æµè§ˆå™¨è‡ªåŠ¨åŒ–éªŒè¯åŠŸèƒ½
7. **æ›´æ–°çŠ¶æ€** â€” `passes: false â†’ true`
8. **æäº¤ä»£ç ** â€” `git add + commit`
9. **æ›´æ–°è¿›åº¦** â€” å†™å…¥ `claude-progress.txt`
10. **å¹²å‡€é€€å‡º** â€” ç¡®ä¿æ— æœªæäº¤å˜æ›´

### æ¨¡å¼äºŒï¼šå¤š Agent å¹¶è¡Œå¼€å‘ï¼ˆconcurrency = 2~8ï¼‰

å¤šä¸ª Coding Agent åŒæ—¶å·¥ä½œï¼Œæ¯ä¸ªåœ¨ç‹¬ç«‹ Git åˆ†æ”¯ä¸Šå¼€å‘ä¸åŒ Featureã€‚

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    main     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼            â–¼            â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚   Agent 0    â”‚ â”‚   Agent 1    â”‚ â”‚   Agent 2    â”‚
     â”‚ branch:      â”‚ â”‚ branch:      â”‚ â”‚ branch:      â”‚
     â”‚ agent-0/     â”‚ â”‚ agent-1/     â”‚ â”‚ agent-2/     â”‚
     â”‚ feature-003  â”‚ â”‚ feature-007  â”‚ â”‚ feature-012  â”‚
     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                â”‚                â”‚
            â–¼                â–¼                â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚          Git Merge Queueï¼ˆåŠ é”ä¸²è¡Œï¼‰           â”‚
     â”‚                                              â”‚
     â”‚  â†’ æˆåŠŸï¼šåˆå¹¶åˆ° mainï¼Œé¢†å–ä¸‹ä¸€ä¸ª Feature       â”‚
     â”‚  â†’ å†²çªï¼šæ ‡è®°äººå·¥å¤„ç†ï¼ŒAgent è·³è¿‡ç»§ç»­          â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

å¹¶è¡Œæ¨¡å¼å…³é”®æœºåˆ¶ï¼š

| æœºåˆ¶ | è¯´æ˜ |
|------|------|
| Feature åŸå­åˆ†é… | `claimedFeatures` Map ä¿è¯ä¸ä¼šä¸¤ä¸ª Agent æŠ¢åŒä¸€ä¸ª Feature |
| åˆ†æ”¯éš”ç¦» | `agent-{index}/feature-{featureId}`ï¼Œäº’ä¸å¹²æ‰° |
| Git é” | Promise é˜Ÿåˆ—ä¸²è¡Œæ‰§è¡Œæ‰€æœ‰ git æ“ä½œ |
| è‡ªåŠ¨åˆå¹¶ | `git merge --no-ff` å› mainï¼Œä¿ç•™åˆ†æ”¯å†å² |
| å†²çªå¤„ç† | åˆå¹¶å¤±è´¥æ—¶ `git merge --abort`ï¼Œæ ‡è®°äººå·¥ä»‹å…¥ |
| é”™è¯¯é‡è¯• | Agent å¼‚å¸¸é€€å‡ºå 5 ç§’è‡ªåŠ¨é‡è¯•é¢†å–æ–° Feature |

### ç”Ÿå‘½å‘¨æœŸçŠ¶æ€æœº

```
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     åˆ›å»º/å¯¼å…¥ â”€â”€â–ºâ”‚   idle   â”‚
                 â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                      â”‚ å¯åŠ¨
                      â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ initializing â”‚  Initializer Agent è¿è¡Œä¸­
              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ feature_list.json ç”Ÿæˆ
                     â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  reviewing   â”‚  å®¡æŸ¥æ¨¡å¼ï¼ˆå¯é€‰ï¼‰
              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ ç¡®è®¤å®¡æŸ¥
                     â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â—„â”€â”€ è‡ªåŠ¨ç»­æ¥ï¼ˆ3s å»¶è¿Ÿï¼‰
              â”‚   running    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜              â”‚
          æ‰‹åŠ¨åœæ­¢â”‚       â”‚ å…¨éƒ¨é€šè¿‡         â”‚
                 â–¼       â–¼                  â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Session N ç»“æŸ
          â”‚ paused â”‚ â”‚ completed â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å‚è€ƒ

- [Anthropic: Effective Harnesses for Long-Running Agents](https://www.anthropic.com/engineering/effective-harnesses-for-long-running-agents)
- [Anthropic: Autonomous Coding Quickstart](https://github.com/anthropics/claude-quickstarts/tree/main/autonomous-coding)
- [Claude 4 Prompting Guide: Multi-Context Window Workflows](https://docs.claude.com/en/docs/build-with-claude/prompt-engineering/claude-4-best-practices#multi-context-window-workflows)
